{% extends 'base.html' %}
{% block title %}Hospital Detail Page {% endblock %}
{% load static %}
{% block content %}
<style>
body{
  background: #f2f2f2;
  font-family: 'Open Sans', sans-serif;
}

.search {
  width: 50%;
  position: relative;
  display: flex;
}

.searchTerm {
  width: 50%;
  border: 2px solid #black;
  border-right: none;
  padding: 5px;
  height: 40px;
  border-radius: 5px 0 0 5px;
  outline: none;
  color: black;
}

.searchTerm:focus{
  color: black;
}
</style>
<div class="container">

    <br>
    <div class="card mb-3" style="max-width: 810px; border-color: black;">
        <div class="row no-gutters">
            <div class="col-md-4">
                {% if hospital_obj.user.profile_image %}
                <img src="{{hospital_obj.user.profile_image.url}}" class="card-img" alt="no image found">
                {% else %}
                <img src="{% static 'images/defaultimage.png' %}" class="card-img" alt="no display found">
                {% endif %}
            </div>
            <!--    {{ doc_lists.user.gender}}-->
            <div class="col-md-8" style="color: black;">
                <div class="card-body">
                    <h4 class="card-title"><font color="black">{{hospital_obj.name|title}}
                    </font></h4>
                    <h5 class="card-text">{{ hospital_obj.is_type }}</h5>
                    <h5 class="card-text">{{ hospital_obj.doctor_pro.count }} Doctors</h5>
                    <h5>
                        {% for i in hospital_obj.hospital.all reversed %}

                        {% if forloop.counter > 4 %}
                        {{ endfor }}
                        {% else %}
                        <a data-toggle="modal"
                           data-target="#myModal{{i.pk}}{{ forloop.counter0}}">
                            <img src="{{ i.image.url }}" alt=""
                                 style="width:15%; height: 70; border-radius: 5px; cursor: pointer; transition: 0.3s;"/></a>

                        {% endif %}
                        {% endfor %}

                    </h5>
                    {% for image in hospital_obj.hospital.all reversed %}
                    <div id="myModal{{ image.pk }}{{forloop.counter0}}" class="modal fade"
                         role="dialog">
                        <div class="modal-dialog" style="text-align:center;">
                            <div class="modal-content">
                                <img src="{{ image.image.url }}" style="height: 100%; width: 100%;" alt=""/>
                            </div>
                        </div>
                    </div>
                    {% endfor %}


                    <!--        <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>-->
                </div>

            </div>
        </div>
    </div>
    <br>
    <center><h3 style="color: black; font-weight: bold;">
        All Doctors
    </h3></center>
    <br>
    <input type="text" class="searchTerm" id="SearchTextField" placeholder="Search doctors, specialization, etc.">
    <br>
    <table id="doc_table">
        <thead>
        <tr>
            <th></th>
        </tr>
        </thead>
        <tbody>
        {% for doctor in doc_lists %}
        <tr>
            <td>

                <div class="card mb-3" style="max-width: 680px; border-color: black;">
                    <div class="row no-gutters">
                        <div class="col-md-4">
                            {% if doctor.user.profile_image %}
                            <img src="{{ doctor.user.profile_image.url }}" class="card-img" alt="no image found">
                            {% else %}
                            <img src="{% static 'images/defaultimage.png' %}" class="card-img" alt="no display found">
                            {% endif %}
                        </div>
                        <!--    {{ doc_lists.user.gender}}-->
                        <div class="col-md-8" style="color: black;">
                            <div class="card-body">
                                <h4 class="card-title"><font color="black">Dr. {{ doctor.user.first_name }}
                                  {{doctor.user.last_name }}</font></h4>
                                <h5 class="card-text">{% for qualification in doctor.qualification.all %}
                                    {{ qualification.degree|title }}
                                    {% endfor %}
                                </h5>
                                <h5 class="card-text">{{ doctor.specialization }}</h5>
                                <h5 class="card-text">{{ doctor.council }}</h5>

                                  <h5 class="card-text"><i class="fa fa-envelope" aria-hidden="true"></i>
                                    {{ doctor.user.email }}</h5>
                                <h5 class="card-text">{{ doctor.experience }} years experience overall</h5>

                                <!--        <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>-->
                            </div>
                            <div class="text-right">
<!--                                <div class="card-footer">-->
<!--                                    <a href="{% url 'patient:booking' doctor.id %}" class="btn btn-sm"-->
<!--                                       style="background-color: #20c997; color: black; border-color: black;">Book Appointment</a>-->
<!--                                </div>-->
                            </div>
                        </div>
                    </div>
                </div>
                <br>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>

</div>

{% endblock %}
{% block js %}
<script>
    $(document).ready(function() {
  var all_doc = $('#doc_table').DataTable({
        "ordering": false,
        "info":     false,
        "lengthChange": false,
        "dom": "tipr"
   });

   $('#SearchTextField').keyup(function(){
      all_doc.search($(this).val()).draw() ;
    });

 });
</script>
{% endblock %}